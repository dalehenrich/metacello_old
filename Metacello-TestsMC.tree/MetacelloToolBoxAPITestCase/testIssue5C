
!MetacelloToolBoxAPITestCase methodsFor: 'tests' stamp: 'dkh 1/18/2012 14:21'!
testIssue5C
    | expectException issues validationError |
    expectException := false.
    [ 
    MetacelloToolBox
        createBaseline: '1.0-baseline'
        for: self configurationName asString
        repository: 'dictionary://' , self repositoryName asString
        requiredProjects: #()
        packages: #('MetacelloTestConfigurationOfFoo')
        dependencies: {('MetacelloTestConfigurationOfFoo' -> #('MetacelloTestConfigurationOfFoo'))}
        groups: #() ]
        on: MetacelloValidationFailure
        do: [ :ex | 
            issues := ex issues.
            expectException := true ].
    self assert: expectException.
    self assert: issues size == 1.
    validationError := issues at: 1.
    self assert: validationError reasonCode == #versionCompositionError.
    self assert: validationError callSite == #validateProject:version:! !
